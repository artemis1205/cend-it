(this["webpackJsonpcend-it"]=this["webpackJsonpcend-it"]||[]).push([[0],{34:function(e,t,n){},44:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(12),c=n.n(a),s=n(38),i=n.n(s),r=(n(44),n(0)),o=n.n(r),l=n(1),u=n(14),d=(n(34),n(21)),h=(n(36),n(37),n(48),n(39)),j=n(11);d.a.initializeApp({apiKey:"AIzaSyDbbnI9ZVKSTWiMNC7CIhRnebsKv4Wslcs",authDomain:"cend-it.firebaseapp.com",databaseURL:"https://cend-it-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cend-it",storageBucket:"cend-it.appspot.com",messagingSenderId:"807693819563",appId:"1:807693819563:web:9147c7cdd9f6ca5cc8a1ee"});var b=d.a.auth();var g=function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"SignUpPage",children:Object(j.jsx)("button",{className:"SignInButton",onClick:function(){var e=new d.a.auth.GoogleAuthProvider;b.signInWithPopup(e).catch((function(e){console.error(e)}))},children:"Sign in with Google"})})})},p=function(e){var t=e.email,n=e.setEmail,a=e.password,c=e.setPassword,s=e.handleLogin,i=e.handleSignup,r=(e.handleLogout,e.hasAccount),o=e.setHasAccount,l=e.emailError,u=e.passwordError;return Object(j.jsxs)("section",{children:[Object(j.jsxs)("div",{className:"logincontainer",children:[Object(j.jsx)("input",{placeholder:"Email",className:"Login-Mail",type:"text",autoFocus:!0,required:!0,value:t,onChange:function(e){return n(e.target.value)}}),Object(j.jsx)("h2",{}),Object(j.jsx)("input",{placeholder:"Password",className:"Login-Password",type:"password",required:!0,value:a,onChange:function(e){return c(e.target.value)}}),Object(j.jsx)("div",{className:"Buttoncontainers",children:r?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{children:["Don't have an account? ",Object(j.jsx)("span",{style:{color:"#5f91e8"},onClick:function(){return o(!r)},children:"Sign up"})]}),Object(j.jsx)("button",{className:"Sign",onClick:s,children:"Sign in"})]}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("p",{children:["Have an account? ",Object(j.jsx)("span",{style:{color:"#5f91e8"},onClick:function(){return o(!r)},children:"Sign in"})]}),Object(j.jsx)("button",{className:"Sign",onClick:i,children:"Sign up"})]})}),Object(j.jsx)(g,{})]}),Object(j.jsx)("p",{className:"errormsg",children:l}),Object(j.jsx)("p",{className:"errormsg",children:u})]})};n(50);d.a.initializeApp({apiKey:"AIzaSyDbbnI9ZVKSTWiMNC7CIhRnebsKv4Wslcs",authDomain:"cend-it.firebaseapp.com",databaseURL:"https://cend-it-default-rtdb.europe-west1.firebasedatabase.app",projectId:"cend-it",storageBucket:"cend-it.appspot.com",messagingSenderId:"807693819563",appId:"1:807693819563:web:9147c7cdd9f6ca5cc8a1ee"});var f=d.a.auth(),m=d.a.firestore();function v(){return f.currentUser&&Object(j.jsx)("button",{className:"SignOut",onClick:function(){return f.signOut()},children:"Sign Out"})}function O(){f.currentUser;var e=f.currentUser.email,t=Object(a.useRef)(),n=m.collection("messages"),c=n.orderBy("createdAt","asc").limit(300),s=Object(h.a)(c,{idField:"id"}),i=Object(u.a)(s,1)[0],r=Object(a.useState)(""),d=Object(u.a)(r,2),b=d[0],g=d[1],p=new Date,O=function(){var a=Object(l.a)(o.a.mark((function a(c){var s,i,r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c.preventDefault(),s=f.currentUser,i=s.uid,r=s.photoURL,a.next=4,n.add({text:b,createdAt:Date.now(),uid:i,photoURL:r,name:e,time:("0"+p.getHours()).slice(-2)+":"+("0"+p.getMinutes()).slice(-2)});case 4:g(""),navigator.vibrate&&navigator.vibrate(1e3),console.log("vibrate"),t.current.scrollIntoView({behavior:"smooth"});case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"top",children:Object(j.jsxs)("div",{className:"flex",children:[Object(j.jsx)(v,{}),Object(j.jsx)("h1",{className:"chat-title",children:"Cend-It"})]})}),Object(j.jsxs)("main",{className:"Messages",children:[i&&i.map((function(e){return Object(j.jsx)(x,{message:e},e.id)})),Object(j.jsx)("div",{ref:t})]}),Object(j.jsx)("div",{className:"bottom",children:Object(j.jsxs)("form",{className:"form",onSubmit:O,children:[Object(j.jsx)("input",{className:"input-message",type:"text",value:b,onChange:function(e){return g(e.target.value)}}),Object(j.jsx)("button",{onClick:function(){navigator.vibrate&&navigator.vibrate(1e3),console.log("vibrate")},className:"Send",type:"submit",children:"Send"})]})})]})}function x(e){var t=e.message,n=t.text,a=t.uid,c=(t.photoURL,t.name),s=t.time,i=a===f.currentUser.uid?"sent":"received";return Object(j.jsxs)("div",{className:"message ".concat(i),children:[Object(j.jsx)("h2",{children:c}),Object(j.jsx)("div",{className:"text",children:Object(j.jsx)("p",{children:n})}),Object(j.jsx)("h3",{children:s})]})}var w=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(""),i=Object(u.a)(s,2),r=i[0],o=i[1],l=Object(a.useState)(""),h=Object(u.a)(l,2),b=h[0],g=h[1],f=Object(a.useState)(""),m=Object(u.a)(f,2),v=m[0],x=m[1],w=Object(a.useState)(""),S=Object(u.a)(w,2),N=S[0],k=S[1],C=Object(a.useState)(!1),I=Object(u.a)(C,2),y=I[0],A=I[1],L=function(){d.a.auth().onAuthStateChanged((function(e){e?(o(""),g(""),c(e)):c("")}))};return Object(a.useEffect)((function(){L()}),[]),Object(j.jsx)("div",{children:n?Object(j.jsx)(O,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"triangle"}),Object(j.jsx)("h1",{className:"Title",children:"CEND-IT"}),Object(j.jsx)(p,{email:r,setEmail:o,password:b,setPassword:g,handleLogin:function(){x(""),k(""),d.a.auth().signInWithEmailAndPassword(r,b).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":x(e.message);break;case"auth/wrong-password":k(e.message)}}))},handleSignup:function(){console.log(r),d.a.auth().createUserWithEmailAndPassword(r,b).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":x(e.message);break;case"auth/weak-password":k(e.message)}}))},handleLogout:function(){d.a.auth().signOut()},hasAccount:y,setHasAccount:A,emailError:v,passwordError:N})]})})},S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),s(e),i(e)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");S?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):N(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):N(t,e)}))}}(),k()}},[[51,1,2]]]);
//# sourceMappingURL=main.225af835.chunk.js.map